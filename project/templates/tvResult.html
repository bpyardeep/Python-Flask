{% extends "layout.html" %}
{% block content %}


<div id="carouselExampleIndicators" class="carousel slide" data-ride="carousel">
  <ol class="carousel-indicators">
    <li data-target="#carouselExampleIndicators" data-slide-to="0" class="active"></li>
    <li data-target="#carouselExampleIndicators" data-slide-to="1"></li>
    <li data-target="#carouselExampleIndicators" data-slide-to="2"></li>
    <li data-target="#carouselExampleIndicators" data-slide-to="3"></li>
    <li data-target="#carouselExampleIndicators" data-slide-to="4"></li>
    <li data-target="#carouselExampleIndicators" data-slide-to="5"></li>
    <li data-target="#carouselExampleIndicators" data-slide-to="6"></li>
    <li data-target="#carouselExampleIndicators" data-slide-to="7"></li>

  </ol>


    <div class="carousel-inner">
<div class="carousel-item active">
 <img src="https://image.tmdb.org/t/p/w500/{{images[0]}}" class="d-block w-100" alt="...">
</div>
<div class="carousel-item">
 <img src="https://image.tmdb.org/t/p/w500/{{images[1]}}" class="d-block w-100" alt="...">
</div>
<div class="carousel-item">
 <img src="https://image.tmdb.org/t/p/w500/{{images[2]}}" class="d-block w-100" alt="...">
</div>
<div class="carousel-item">
 <img src="https://image.tmdb.org/t/p/w500/{{images[3]}}" class="d-block w-100" alt="...">
</div>

<div class="carousel-item">
 <img src="https://image.tmdb.org/t/p/w500/{{images[4]}}" class="d-block w-100" alt="...">
</div>

<div class="carousel-item">
 <img src="https://image.tmdb.org/t/p/w500/{{images[5]}}" class="d-block w-100" alt="...">
</div>

<div class="carousel-item">
 <img src="https://image.tmdb.org/t/p/w500/{{images[6]}}" class="d-block w-100" alt="...">
</div>

<div class="carousel-item">
 <img src="https://image.tmdb.org/t/p/w500/{{images[7]}}" class="d-block w-100" alt="...">
</div>


  </div>
  <a class="carousel-control-prev" href="#carouselExampleIndicators" role="button" data-slide="prev">
    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
    <span class="sr-only">Previous</span>
  </a>
  <a class="carousel-control-next" href="#carouselExampleIndicators" role="button" data-slide="next">
    <span class="carousel-control-next-icon" aria-hidden="true"></span>
    <span class="sr-only">Next</span>
  </a>
</div>





<article class="media content-section">
  <img class='rounded-circle article-img' src="https://image.tmdb.org/t/p/w500/{{TV.poster_path}}" alt="">
  <div class="media-body">
    <div class="article-metadata">

      <a class="mr-2" href="#">Rating {{ TV.Popularity }}</a>
      <small class="text-muted">{{ TV.first_air_date }}</small>

    </div>
    <h2><a class="article-title" href="#">{{ TV.TV_title }}</a></h2>
    <p class="article-content">{{ TV.TV_overview }}</p>


    <p>
    <a class="btn btn-outline-primary" data-toggle="collapse" href="#collapseCast" role="button" aria-expanded="false" aria-controls="collapseExample">
    CAST
    </a>
    <button class="btn btn-outline-primary" type="button" data-toggle="collapse" data-target="#collapseVideos" aria-expanded="false" aria-controls="collapseExample">
    TRAILER
    </button>
    <button class="btn btn-outline-primary" type="button" data-toggle="collapse" data-target="#collapseMovieInfo" aria-expanded="false" aria-controls="collapseExample">
    TV INFO

    </button>

    <button class="btn btn-outline-primary" type="button" data-toggle="collapse" data-target="#collapseReview" aria-expanded="false" aria-controls="collapseExample">
    REVIEWS
    </button>


    <button class="btn btn-outline-primary" type="button" data-toggle="collapse" data-target="#collapseSeason" aria-expanded="false" aria-controls="collapseExample">
      SEASONS
      </button>


    </p>

    <div class="collapse" id="collapseCast">
    <div class="card card-body">

      <h3>Cast</h3>
      <br>
      {%for cast in casts%}

      <div class="column">
      <img  height="44" width="32" src="https://image.tmdb.org/t/p/w500/{{cast[2]}}" alt="">
      <a href="#">{{cast[0]}}</a>--->


      {{cast[1]}}

      </div>
          <br>
          {%endfor%}
      </div>

      </div>


    <div class="collapse" id="collapseVideos">
    <div class="card card-body">

            <iframe width="560" height="315" src="https://www.youtube.com/embed/{{video}}" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>

      </div>
    </div>



    <div class="collapse" id="collapseMovieInfo">
    <div class="card card-body">

          <h3>TV INFO</h3>
          <p class="article-content">{{ TV.TV_overview }}</p>
          <h6>Genre:</h6> <p class="article-content">{{ genre }}</p>
          <h6>Aired On:</h6> <p class="article-content">{{ TV.release_date }}</p>
          <h6>Studio:</h6> <p class="article-content">{{ pcs }}</p>
          <h6>homepage: </h6> <a href="{{TV.homepage}}">{{TV.TV_title}} HomePage</a>

      </div>
    </div>








    <div class="collapse" id="collapseReview">
    <div class="card card-body">

          <h5>Add Your Rating </h5><x-star-rating value="1" number="5"></x-star-rating>
            
          {%if Favv %}
          <input type="submit"  onclick="unfavourite()" id ="myFav2" value="remove from favourite">
            {% else %}
            <input type="submit" onclick="favourite()" id ="myFav" value="add to favourite"> 
            {%endif%}
                       

      </div>
    </div>




    <div class="collapse" id="collapseSeason">
      <div class="card card-body">
  
          {%for season in seasons%}

            <h4>{{season.Season_title}}</h4>
            <p>{{season.Season_overview}}</p>
            <small>{{season.release_date}}</small>
            <br>
            <br>

          {%endfor%}
  
  
        </div>
      </div>





  </div>
</article>



<script>

    function favourite(){
                    var xhttp = new XMLHttpRequest();
                    
                    
                    xhttp.onreadystatechange = function() {

                        if (this.readyState == 4 && this.status == 200) {
                        
                          document.getElementById('myFav').value = 'added'
                          document.getElementById('myfav').onclick(unfavourite)
                         
                          

                          }
                    };
                    xhttp.open("POST", "/_favouritess_tv/"+1+"/"+"{{TV.TV_id}}", true);
                    xhttp.send();
                    
}
    





function unfavourite(){
                    var xhttp = new XMLHttpRequest();
                    var k = 1
                    
                    xhttp.onreadystatechange = function() {

                        if (this.readyState == 4 && this.status == 200) {
                        
                          document.getElementById('myFav2').value = 'removed'
                          document.getElementById('myfav').onclick(favourite)
                          

                          }
                    };
                    xhttp.open("POST", "/_favouritess_tv/"+2+"/"+"{{TV.TV_id}}", true);
                    xhttp.send();
                    
}
    
  </script>


{% endblock content %}
